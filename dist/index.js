#!/usr/bin/env node
/**
 * Baozi MCP Server V2.0.0
 *
 * Model Context Protocol server for Baozi prediction markets on Solana.
 * Now with mainnet support and transaction building capabilities.
 *
 * Features:
 * - Read markets, positions, quotes
 * - Validate market timing (v6.2 rules)
 * - Build unsigned bet transactions
 * - Simulate transactions before signing
 *
 * Usage:
 *   npx @baozi/mcp-server
 *
 * Or add to Claude Desktop config:
 *   {
 *     "mcpServers": {
 *       "baozi": {
 *         "command": "npx",
 *         "args": ["@baozi/mcp-server"]
 *       }
 *     }
 *   }
 *
 * Environment Variables:
 *   HELIUS_RPC_URL    - Helius RPC endpoint (recommended)
 *   SOLANA_RPC_URL    - Alternative RPC endpoint
 *   SOLANA_NETWORK    - Network: 'mainnet-beta' (default) or 'devnet'
 *   BAOZI_PROGRAM_ID  - Override program ID (default: V4.7.6 mainnet)
 */
import { Server } from '@modelcontextprotocol/sdk/server/index.js';
import { StdioServerTransport } from '@modelcontextprotocol/sdk/server/stdio.js';
import { CallToolRequestSchema, ListToolsRequestSchema, ListResourcesRequestSchema, ReadResourceRequestSchema, } from '@modelcontextprotocol/sdk/types.js';
import { TOOLS, handleTool } from './tools.js';
import { RESOURCES, handleResource } from './resources.js';
import { PROGRAM_ID, NETWORK, IS_MAINNET, RPC_ENDPOINT } from './config.js';
const VERSION = '2.0.0';
// Create MCP server
const server = new Server({
    name: 'baozi-mcp',
    version: VERSION,
}, {
    capabilities: {
        tools: {},
        resources: {},
    },
});
// List available tools
server.setRequestHandler(ListToolsRequestSchema, async () => {
    return { tools: TOOLS };
});
// Handle tool calls
server.setRequestHandler(CallToolRequestSchema, async (request) => {
    const { name, arguments: args } = request.params;
    return handleTool(name, args || {});
});
// List available resources
server.setRequestHandler(ListResourcesRequestSchema, async () => {
    return { resources: RESOURCES };
});
// Read resource content
server.setRequestHandler(ReadResourceRequestSchema, async (request) => {
    const { uri } = request.params;
    return handleResource(uri);
});
// Start server
async function main() {
    const transport = new StdioServerTransport();
    await server.connect(transport);
    // Log startup info to stderr (stdout is for MCP protocol)
    console.error('');
    console.error('='.repeat(60));
    console.error(`Baozi MCP Server v${VERSION}`);
    console.error('='.repeat(60));
    console.error('');
    console.error(`Network: ${IS_MAINNET ? 'MAINNET' : 'Devnet'} (${NETWORK})`);
    console.error(`Program ID: ${PROGRAM_ID.toBase58()}`);
    console.error(`RPC: ${RPC_ENDPOINT.substring(0, 50)}...`);
    console.error('');
    console.error('Available Tools:');
    console.error('-'.repeat(40));
    TOOLS.forEach(tool => {
        console.error(`  ${tool.name}`);
        console.error(`    ${tool.description.substring(0, 70)}...`);
    });
    console.error('');
    console.error('Available Resources:');
    console.error('-'.repeat(40));
    RESOURCES.forEach(resource => {
        console.error(`  ${resource.uri}`);
        console.error(`    ${resource.description}`);
    });
    console.error('');
    console.error('Dynamic Resources:');
    console.error('-'.repeat(40));
    console.error('  baozi://portfolio/{wallet}');
    console.error('    User portfolio with positions and statistics');
    console.error('');
    console.error('='.repeat(60));
    console.error('Ready for connections...');
    console.error('');
}
main().catch((error) => {
    console.error('Fatal error:', error);
    process.exit(1);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0E4Qkc7QUFDSCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDbkUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDakYsT0FBTyxFQUNMLHFCQUFxQixFQUNyQixzQkFBc0IsRUFDdEIsMEJBQTBCLEVBQzFCLHlCQUF5QixHQUMxQixNQUFNLG9DQUFvQyxDQUFDO0FBRTVDLE9BQU8sRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBQy9DLE9BQU8sRUFBRSxTQUFTLEVBQUUsY0FBYyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUU1RSxNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUM7QUFFeEIsb0JBQW9CO0FBQ3BCLE1BQU0sTUFBTSxHQUFHLElBQUksTUFBTSxDQUN2QjtJQUNFLElBQUksRUFBRSxXQUFXO0lBQ2pCLE9BQU8sRUFBRSxPQUFPO0NBQ2pCLEVBQ0Q7SUFDRSxZQUFZLEVBQUU7UUFDWixLQUFLLEVBQUUsRUFBRTtRQUNULFNBQVMsRUFBRSxFQUFFO0tBQ2Q7Q0FDRixDQUNGLENBQUM7QUFFRix1QkFBdUI7QUFDdkIsTUFBTSxDQUFDLGlCQUFpQixDQUFDLHNCQUFzQixFQUFFLEtBQUssSUFBSSxFQUFFO0lBQzFELE9BQU8sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUM7QUFDMUIsQ0FBQyxDQUFDLENBQUM7QUFFSCxvQkFBb0I7QUFDcEIsTUFBTSxDQUFDLGlCQUFpQixDQUFDLHFCQUFxQixFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsRUFB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L0MsQ0FBQyxDQUFDLENBQUM7SUFDSCxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2xCLE9BQU8sQ0FBQyxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUNwQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM5QixPQUFPLENBQUMsS0FBSyxDQUFDLDhCQUE4QixDQUFDLENBQUM7SUFDOUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxrREFBa0QsQ0FBQyxDQUFDO0lBQ2xFLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDbEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDOUIsT0FBTyxDQUFDLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0lBQzFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDcEIsQ0FBQztBQUVELElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO0lBQ3JCLE9BQU8sQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3JDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEIsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIjIS91c3IvYmluL2VudiBub2RlXG4vKipcbiAqIEJhb3ppIE1DUCBTZXJ2ZXIgVjIuMC4wXG4gKlxuICogTW9kZWwgQ29udGV4dCBQcm90b2NvbCBzZXJ2ZXIgZm9yIEJhb3ppIHByZWRpY3Rpb24gbWFya2V0cyBvbiBTb2xhbmEuXG4gKiBOb3cgd2l0aCBtYWlubmV0IHN1cHBvcnQgYW5kIHRyYW5zYWN0aW9uIGJ1aWxkaW5nIGNhcGFiaWxpdGllcy5cbiAqXG4gKiBGZWF0dXJlczpcbiAqIC0gUmVhZCBtYXJrZXRzLCBwb3NpdGlvbnMsIHF1b3Rlc1xuICogLSBWYWxpZGF0ZSBtYXJrZXQgdGltaW5nICh2Ni4yIHJ1bGVzKVxuICogLSBCdWlsZCB1bnNpZ25lZCBiZXQgdHJhbnNhY3Rpb25zXG4gKiAtIFNpbXVsYXRlIHRyYW5zYWN0aW9ucyBiZWZvcmUgc2lnbmluZ1xuICpcbiAqIFVzYWdlOlxuICogICBucHggQGJhb3ppL21jcC1zZXJ2ZXJcbiAqXG4gKiBPciBhZGQgdG8gQ2xhdWRlIERlc2t0b3AgY29uZmlnOlxuICogICB7XG4gKiAgICAgXCJtY3BTZXJ2ZXJzXCI6IHtcbiAqICAgICAgIFwiYmFvemlcIjoge1xuICogICAgICAgICBcImNvbW1hbmRcIjogXCJucHhcIixcbiAqICAgICAgICAgXCJhcmdzXCI6IFtcIkBiYW96aS9tY3Atc2VydmVyXCJdXG4gKiAgICAgICB9XG4gKiAgICAgfVxuICogICB9XG4gKlxuICogRW52aXJvbm1lbnQgVmFyaWFibGVzOlxuICogICBIRUxJVVNfUlBDX1VSTCAgICAtIEhlbGl1cyBSUEMgZW5kcG9pbnQgKHJlY29tbWVuZGVkKVxuICogICBTT0xBTkFfUlBDX1VSTCAgICAtIEFsdGVybmF0aXZlIFJQQyBlbmRwb2ludFxuICogICBTT0xBTkFfTkVUV09SSyAgICAtIE5ldHdvcms6ICdtYWlubmV0LWJldGEnIChkZWZhdWx0KSBvciAnZGV2bmV0J1xuICogICBCQU9aSV9QUk9HUkFNX0lEICAtIE92ZXJyaWRlIHByb2dyYW0gSUQgKGRlZmF1bHQ6IFY0LjcuNiBtYWlubmV0KVxuICovXG5pbXBvcnQgeyBTZXJ2ZXIgfSBmcm9tICdAbW9kZWxjb250ZXh0cHJvdG9jb2wvc2RrL3NlcnZlci9pbmRleC5qcyc7XG5pbXBvcnQgeyBTdGRpb1NlcnZlclRyYW5zcG9ydCB9IGZyb20gJ0Btb2RlbGNvbnRleHRwcm90b2NvbC9zZGsvc2VydmVyL3N0ZGlvLmpzJztcbmltcG9ydCB7XG4gIENhbGxUb29sUmVxdWVzdFNjaGVtYSxcbiAgTGlzdFRvb2xzUmVxdWVzdFNjaGVtYSxcbiAgTGlzdFJlc291cmNlc1JlcXVlc3RTY2hlbWEsXG4gIFJlYWRSZXNvdXJjZVJlcXVlc3RTY2hlbWEsXG59IGZyb20gJ0Btb2RlbGNvbnRleHRwcm90b2NvbC9zZGsvdHlwZXMuanMnO1xuXG5pbXBvcnQgeyBUT09MUywgaGFuZGxlVG9vbCB9IGZyb20gJy4vdG9vbHMuanMnO1xuaW1wb3J0IHsgUkVTT1VSQ0VTLCBoYW5kbGVSZXNvdXJjZSB9IGZyb20gJy4vcmVzb3VyY2VzLmpzJztcbmltcG9ydCB7IFBST0dSQU1fSUQsIE5FVFdPUkssIElTX01BSU5ORVQsIFJQQ19FTkRQT0lOVCB9IGZyb20gJy4vY29uZmlnLmpzJztcblxuY29uc3QgVkVSU0lPTiA9ICcyLjAuMCc7XG5cbi8vIENyZWF0ZSBNQ1Agc2VydmVyXG5jb25zdCBzZXJ2ZXIgPSBuZXcgU2VydmVyKFxuICB7XG4gICAgbmFtZTogJ2Jhb3ppLW1jcCcsXG4gICAgdmVyc2lvbjogVkVSU0lPTixcbiAgfSxcbiAge1xuICAgIGNhcGFiaWxpdGllczoge1xuICAgICAgdG9vbHM6IHt9LFxuICAgICAgcmVzb3VyY2VzOiB7fSxcbiAgICB9LFxuICB9XG4pO1xuXG4vLyBMaXN0IGF2YWlsYWJsZSB0b29sc1xuc2VydmVyLnNldFJlcXVlc3RIYW5kbGVyKExpc3RUb29sc1JlcXVlc3RTY2hlbWEsIGFzeW5jICgpID0+IHtcbiAgcmV0dXJuIHsgdG9vbHM6IFRPT0xTIH07XG59KTtcblxuLy8gSGFuZGxlIHRvb2wgY2FsbHNcbnNlcnZlci5zZXRSZXF1ZXN0SGFuZGxlcihDYWxsVG9vbFJlcXVlc3RTY2hlbWEsIGFzeW5jIChyZXF1ZXN0KSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgYXJndW1lbnRzOiBhcmdzIH0gPSByZXF1ZXN0LnBhcmFtcztcbiAgcmV0dXJuIGhhbmRsZVRvb2wobmFtZSwgYXJncyB8fCB7fSk7XG59KTtcblxuLy8gTGlzdCBhdmFpbGFibGUgcmVzb3VyY2VzXG5zZXJ2ZXIuc2V0UmVxdWVzdEhhbmRsZXIoTGlzdFJlc291cmNlc1JlcXVlc3RTY2hlbWEsIGFzeW5jICgpID0+IHtcbiAgcmV0dXJuIHsgcmVzb3VyY2VzOiBSRVNPVVJDRVMgfTtcbn0pO1xuXG4vLyBSZWFkIHJlc291cmNlIGNvbnRlbnRcbnNlcnZlci5zZXRSZXF1ZXN0SGFuZGxlcihSZWFkUmVzb3VyY2VSZXF1ZXN0U2NoZW1hLCBhc3luYyAocmVxdWVzdCkgPT4ge1xuICBjb25zdCB7IHVyaSB9ID0gcmVxdWVzdC5wYXJhbXM7XG4gIHJldHVybiBoYW5kbGVSZXNvdXJjZSh1cmkpO1xufSk7XG5cbi8vIFN0YXJ0IHNlcnZlclxuYXN5bmMgZnVuY3Rpb24gbWFpbigpIHtcbiAgY29uc3QgdHJhbnNwb3J0ID0gbmV3IFN0ZGlvU2VydmVyVHJhbnNwb3J0KCk7XG4gIGF3YWl0IHNlcnZlci5jb25uZWN0KHRyYW5zcG9ydCk7XG5cbiAgLy8gTG9nIHN0YXJ0dXAgaW5mbyB0byBzdGRlcnIgKHN0ZG91dCBpcyBmb3IgTUNQIHByb3RvY29sKVxuICBjb25zb2xlLmVycm9yKCcnKTtcbiAgY29uc29sZS5lcnJvcignPScucmVwZWF0KDYwKSk7XG4gIGNvbnNvbGUuZXJyb3IoYEJhb3ppIE1DUCBTZXJ2ZXIgdiR7VkVSU0lPTn1gKTtcbiAgY29uc29sZS5lcnJvcignPScucmVwZWF0KDYwKSk7XG4gIGNvbnNvbGUuZXJyb3IoJycpO1xuICBjb25zb2xlLmVycm9yKGBOZXR3b3JrOiAke0lTX01BSU5ORVQgPyAnTUFJTk5FVCcgOiAnRGV2bmV0J30gKCR7TkVUV09SS30pYCk7XG4gIGNvbnNvbGUuZXJyb3IoYFByb2dyYW0gSUQ6ICR7UFJPR1JBTV9JRC50b0Jhc2U1OCgpfWApO1xuICBjb25zb2xlLmVycm9yKGBSUEM6ICR7UlBDX0VORFBPSU5ULnN1YnN0cmluZygwLCA1MCl9Li4uYCk7XG4gIGNvbnNvbGUuZXJyb3IoJycpO1xuICBjb25zb2xlLmVycm9yKCdBdmFpbGFibGUgVG9vbHM6Jyk7XG4gIGNvbnNvbGUuZXJyb3IoJy0nLnJlcGVhdCg0MCkpO1xuICBUT09MUy5mb3JFYWNoKHRvb2wgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoYCAgJHt0b29sLm5hbWV9YCk7XG4gICAgY29uc29sZS5lcnJvcihgICAgICR7dG9vbC5kZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgNzApfS4uLmApO1xuICB9KTtcbiAgY29uc29sZS5lcnJvcignJyk7XG4gIGNvbnNvbGUuZXJyb3IoJ0F2YWlsYWJsZSBSZXNvdXJjZXM6Jyk7XG4gIGNvbnNvbGUuZXJyb3IoJy0nLnJlcGVhdCg0MCkpO1xuICBSRVNPVVJDRVMuZm9yRWFjaChyZXNvdXJjZSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihgICAke3Jlc291cmNlLnVyaX1gKTtcbiAgICBjb25zb2xlLmVycm9yKGAgICAgJHtyZXNvdXJjZS5kZXNjcmlwdGlvbn1gKTtcbiAgfSk7XG4gIGNvbnNvbGUuZXJyb3IoJycpO1xuICBjb25zb2xlLmVycm9yKCdEeW5hbWljIFJlc291cmNlczonKTtcbiAgY29uc29sZS5lcnJvcignLScucmVwZWF0KDQwKSk7XG4gIGNvbnNvbGUuZXJyb3IoJyAgYmFvemk6Ly9wb3J0Zm9saW8ve3dhbGxldH0nKTtcbiAgY29uc29sZS5lcnJvcignICAgIFVzZXIgcG9ydGZvbGlvIHdpdGggcG9zaXRpb25zIGFuZCBzdGF0aXN0aWNzJyk7XG4gIGNvbnNvbGUuZXJyb3IoJycpO1xuICBjb25zb2xlLmVycm9yKCc9Jy5yZXBlYXQoNjApKTtcbiAgY29uc29sZS5lcnJvcignUmVhZHkgZm9yIGNvbm5lY3Rpb25zLi4uJyk7XG4gIGNvbnNvbGUuZXJyb3IoJycpO1xufVxuXG5tYWluKCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoJ0ZhdGFsIGVycm9yOicsIGVycm9yKTtcbiAgcHJvY2Vzcy5leGl0KDEpO1xufSk7XG4iXX0=